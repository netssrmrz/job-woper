<html>
  <head>
    <link type="text/css" rel="stylesheet" href="/style/main.css" />
    <link type="text/css" rel="stylesheet" href="/style/Game_Arena.css" />
    <style>
      #pause_btn
      {
        position: absolute;
        left: 10px;
        top: 10px;
      }
    </style>

    <script type="module">
      import Utils from "/lib/Utils.js";
      import JW_Utils from "/lib/JW_Utils.js";
      import "/component/Game_Arena.mjs";
      import Explosion from "/lib/game/Explosion.js";
      import ICBM from "/lib/game/ICBM.js";
      import City from "/lib/game/City.js";
      import Patriot_Explosion from "/lib/game/Patriot_Explosion.js";
      import Patriot from "/lib/game/Patriot.js";
      import Enemy from "/lib/game/Enemy.js";

      function On_Click_Game(event)
      {
        const click_pos = game.To_Click_Pos({x: event.offsetX, y: event.offsetY});
        game.Obj_Add(new Patriot(click_pos, Patriot_Explosion));
      }

      main();
      async function main()
      {
        await JW_Utils.Import_API();
        JW_Utils.Update_Access();

        window.parent.jw_header.subtitle = "Game";

        const objs =
        [
          new City(100,100),
          new City(-100,100),
          new City(-100,-100),
          new City(100,-100),
          new Enemy({ICBM, Explosion}),
        ];
        game.value = objs;
        game.Start();

        game.addEventListener("click", On_Click_Game);
        pause_btn.addEventListener("click", () => game.Toggle());
      }
    </script>
  </head>

  <body>
    <button id="pause_btn">Pause</button>
    <game-arena id="game"></game-arena>
  </body>
</html>